import { Plugin } from 'boost';

declare module '@droid/core' {
  declare export type Execution = {
    cmd: string,
    code: string | number,
    failed: boolean,
    killed?: boolean,
    signal: ?number,
    stderr: string,
    stdout: string,
    timedOut: boolean,
  };

  declare export type EngineMetadata = {
    bin: string,
    configName: string,
    dependencies: string[],
    description: string,
    helpOption: string,
    title: string,
  };

  declare export type EngineOptions = {
    args: string[],
    env: { [key: string]: string },
  };

  declare export class Engine extends Plugin<EngineOptions> {
    metadata: EngineMetadata;
    options: EngineOptions;

    constructor(options?: Object): this;
    formatFile(data: Object): string;
    handleFailure(error: Execution): void;
    handleSuccess(response: Execution): void;
    mergeConfig(prev: Object, next: Object): Object;
    setMetadata(metadata: Object): this;
  }
}
